\usepackage{etoolbox}

\BeforeBeginEnvironment{frame}{%
  \setbeamertemplate{headline}[logoheader theme]%
  \setbeamertemplate{sidebar right}[logoheader]%
}

\makeatletter
\define@key{beamerframe}{noheader}[true]{%
  \setbeamertemplate{headline}[noheader]%
}
\makeatother

\makeatletter
\define@key{beamerframe}{englogoheader}[true]{%
  \setbeamertemplate{headline}[englogoheader]%
}
\makeatother

\makeatletter
\define@key{beamerframe}{rulogoheader}[true]{%
  \setbeamertemplate{headline}[rulogoheader]%
}
\makeatother

\makeatletter
\define@key{beamerframe}{nologo}[true]{%
  \setbeamertemplate{sidebar right}[nologo]%
}
\makeatother

\newenvironment{darkbars}
{%
\setbeamercolor{normal text}{fg=white,bg=itmoblue}
\setbeamercolor{structure}{fg=white}
\setbeamercolor{palette primary}{use=structure,bg=itmoblue!75!black, fg=white}
}
{}

\logo{
    \includegraphics[width=0.25\paperwidth,keepaspectratio]{ppt/media/image5.png}
}

\mode<presentation>
{
  \usetheme{itmo}
  \setbeamertemplate{navigation symbols}{}
} 

\newcommand{\itmologoslide}{
\begin{darkbars}
    \begin{frame}[noheader,nologo,noframenumbering]
        \begin{minipage}[t][.8\textheight]{\textwidth}
        \vspace{\stretch{1}}
        \begin{center}
          \includegraphics[width=0.5\paperwidth]{ppt/media/image2.png}
        \end{center}
        \vspace{\stretch{2}}
        \begin{beamercolorbox}[center]{date}
          \scriptsize\usebeamerfont{date}\insertdate
        \end{beamercolorbox}%
        \end{minipage}
    \end{frame}
\end{darkbars}
}

\newcommand{\itmothankyou}{
\begin{darkbars}
    \begin{frame}[noheader,nologo,noframenumbering]
        \begin{minipage}[t][.8\textheight]{\textwidth}
        \begin{center}
          \includegraphics[width=0.4\paperwidth]{ppt/media/image2.png}

        \vspace{\stretch{1}}

          \color{white}\large Спасибо за внимание!
        \end{center}
        \vspace{\stretch{3}}
        \begin{beamercolorbox}[center]{date}
          \scriptsize\usebeamerfont{date}\insertdate
        \end{beamercolorbox}%
        \end{minipage}
    \end{frame}
\end{darkbars}
}

\setbeamertemplate{title page}
{
    \begin{minipage}[t][.8\textheight]{\textwidth}
    \begin{center}
      \includegraphics[width=0.4\paperwidth]{ppt/media/image2.png}
    \end{center}
    \vspace{\stretch{1}}
    \begin{beamercolorbox}[center]{title}
      \usebeamerfont{title}\inserttitle\par%
      \ifx\insertsubtitle\@empty%
      \else%
        \vskip0.25em%
        {\usebeamerfont{subtitle}\usebeamercolor[fg]{subtitle}\insertsubtitle\par}%
      \fi%     
    \end{beamercolorbox}%
    \begin{beamercolorbox}[center]{author}
      \usebeamerfont{author}\insertauthor
    \end{beamercolorbox}
    \vspace{\stretch{3}}
    \begin{beamercolorbox}[center]{date}
      \scriptsize\usebeamerfont{date}\insertdate
    \end{beamercolorbox}%
    \end{minipage}
}

\newcommand{\itmoanothertitle}{
    \begin{beamercolorbox}[left]{title}
      \usebeamerfont{title}\inserttitle\par%
      \ifx\insertsubtitle\@empty%
      \else%
        \vskip0.25em%
        {\usebeamerfont{subtitle}\usebeamercolor[fg]{subtitle}\insertsubtitle\par}%
      \fi%     
    \end{beamercolorbox}%
    \begin{beamercolorbox}[left]{author}
      \usebeamerfont{author}\insertauthor
    \end{beamercolorbox}
}
